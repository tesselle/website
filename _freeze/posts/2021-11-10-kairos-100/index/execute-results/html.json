{
  "hash": "6f467bd9727127f7fdfa53940256d740",
  "result": {
    "markdown": "---\ntitle: \"kairos 1.0.0\"\nsubtitle: \"Analysis of Chronological Patterns from Archaeological Count Data\"\nslug: tesselle-kairos-100\ncategories:\n  - packages\n  - releases\nauthor:\n  - name: Nicolas Frerebeau\n    url: https://www.archaeo.science\n    affiliation: CREAP (UAR 3414)\n    affiliation_url: https://mshs.univ-toulouse.fr\n    orcid: 0000-0001-5759-4944\ndate: 2021-11-10\nbibliography: references.bib\n---\n\n\nWe are delighted to announce that [kairos](https://packages.tesselle.org/kairos/) 1.0.0 has just landed on on [<abbr title=\"Comprehensive R Archive Network\">CRAN</abbr>](https://cran.r-project.org/)! kairos is a toolkit for absolute dating and analysis of chronological patterns. This package includes functions for chronological modeling and dating of archaeological assemblages from count data. It allows to compute time point estimates and density estimates of the occupation and duration of an archaeological site.\n\nYou can install it from CRAN with:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"kairos\")\n```\n:::\n\n\nThis first release includes:\n\n* Mean ceramic date estimation [@south1977] with [`mcd()`](https://packages.tesselle.org/kairos/reference/mcd.html)\n* Event and accumulation date estimation [@bellanger2012] with [`event()`](https://packages.tesselle.org/kairos/reference/event.html)\n* Aoristic analysis [@ratcliffe2000] with [`aoristic()`](https://packages.tesselle.org/kairos/reference/aoristic.html)\n* Chronological apportioning [@roberts2012] with [`apportion()`](https://packages.tesselle.org/kairos/reference/apportion.html)\n\nThis post highlights the basics of the package using the [`zuni`](https://packages.tesselle.org/folio/reference/zuni.html) dataset [@peeples2012].\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(kairos)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## Load the zuni dataset\n# install.packages(\"folio\")\ndata(\"zuni\", package = \"folio\")\n\n## Coerce the zuni dataset to an abundance (count) matrix\nzuni_counts <- as_count(zuni)\n\n## Set the start and end dates for each ceramic type\nzuni_dates <- list(\n  LINO = c(600, 875), KIAT = c(850, 950), RED = c(900, 1050), \n  GALL = c(1025, 1125), ESC = c(1050, 1150), PUBW = c(1050, 1150),\n  RES = c(1000, 1200), TULA = c(1175, 1300), PINE = c(1275, 1350),\n  PUBR = c(1000, 1200), WING = c(1100, 1200), WIPO = c(1125, 1225),\n  SJ = c(1200, 1300), LSJ = c(1250, 1300), SPR = c(1250, 1300),\n  PINER = c(1275, 1325), HESH = c(1275, 1450), KWAK = c(1275, 1450)\n)\n```\n:::\n\n\n## Mean Ceramic Date\n\nThe Mean Ceramic Date (MCD) is a point estimate of the occupation of an archaeological site [@south1977]. The MCD is estimated as the weighted mean of the date midpoints of the ceramic types found in a given assemblage. The weights are the conditional frequencies of the respective types in the assemblage.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Calculate date midpoint for each ceramic type\nzuni_mid <- vapply(X = zuni_dates, FUN = mean, FUN.VALUE = numeric(1))\n\n## Calculate MCD\nzuni_mcd <- mcd(zuni_counts, dates = zuni_mid)\nhead(zuni_mcd)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nLZ1105 LZ1103 LZ1100 LZ1099 LZ1097 LZ1096 \n  1162   1138   1154   1091   1092    841 \n```\n:::\n\n```{.r .cell-code}\n## Assess the sampling error\nzuni_boot <- bootstrap(zuni_mcd, level = 0.95, probs = NULL)\nhead(zuni_boot)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n        min     mean  max     lower     upper\nLZ1105 1109 1162.828 1219 1161.7533 1163.9027\nLZ1103 1025 1137.285 1220 1135.6594 1138.9106\nLZ1100 1058 1155.771 1242 1153.9587 1157.5833\nLZ1099 1078 1090.898 1100 1090.6298 1091.1662\nLZ1097  892 1090.068 1212 1086.7483 1093.3877\nLZ1096  738  842.526 1048  838.4936  846.5584\n```\n:::\n:::\n\n\n## Event and Accumulation Date\n\nEvent and accumulation dates are density estimates of the occupation and duration of an archaeological site [@bellanger2012]. The event date is an estimation of the *terminus post-quem* of an archaeological assemblage. The accumulation date represents the \"chronological profile\" of the assemblage. \n\nEvent dates are estimated by fitting a Gaussian multiple linear regression model on the factors resulting from a correspondence analysis. This model results from the known dates of a selection of reliable contexts and allows to predict the event dates of the remaining assemblages.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Assume that some assemblages are reliably dated \n## (this is NOT a real example)\nzuni_dates <- c(\n  LZ0569 = 1097, LZ0279 = 1119, CS16 = 1328, LZ0066 = 1111,\n  LZ0852 = 1216, LZ1209 = 1251, CS144 = 1262, LZ0563 = 1206,\n  LZ0329 = 1076, LZ0005Q = 859, LZ0322 = 1109, LZ0067 = 863,\n  LZ0578 = 1180, LZ0227 = 1104, LZ0610 = 1074\n)\n\n## Model the event and accumulation date for each assemblage\nmodel <- event(zuni_counts, dates = zuni_dates, cutoff = 90)\n\n## Estimate the event date of the assemblages\nzuni_event <- predict_event(model, margin = 1, level = 0.95)\nhead(zuni_event)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       date lower upper error\nLZ1105 1168  1158  1178     4\nLZ1103 1143  1139  1147     1\nLZ1100 1156  1148  1164     3\nLZ1099 1099  1092  1106     3\nLZ1097 1088  1080  1097     3\nLZ1096  839   829   849     4\n```\n:::\n:::\n\n\nThe accumulation date is defined as the weighted mean of the event date of the ceramic types found in a given assemblage. The weights are the conditional frequencies of the respective types in the assemblage.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Estimate accumulation dates\nzuni_acc <- predict_accumulation(model)\nhead(zuni_acc)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nLZ1105 LZ1103 LZ1100 LZ1099 LZ1097 LZ1096 \n  1170   1140   1158   1087   1092    875 \n```\n:::\n:::\n\n\nEvent and accumulation dates can be displayed as density curves [see @bellanger2012 for the interpretation of the curves]. The probability density of the event date can be approximated by a normal distribution, while the accumulation time can be estimated by a Gaussian mixture. The distribution function of the accumulation time is quite close to the definition of the *tempo plot* introduced by @dye2016: an estimates of the cumulative occurrence of archaeological events.\n\n\n::: {.cell layout=\"[[50,50]]\"}\n\n```{.r .cell-code}\n## Activity plot\n## The event date is plotted as a line\n## The accumulation time is shown as a grey filled area\nplot(model, type = \"activity\", event = TRUE, select = \"LZ1105\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/thumbnail-1.png){width=672}\n:::\n\n```{.r .cell-code}\n## Tempo plot\nplot(model, type = \"tempo\", select = \"LZ1105\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/thumbnail-2.png){width=672}\n:::\n:::\n\n\n## Aoristic Analysis\n\nAoristic analysis [@ratcliffe2000] can be used to determine the probability of contemporaneity of archaeological sites or assemblages. The aoristic analysis distributes the probability of an event uniformly over each temporal fraction of the period considered. The aoristic sum is then the distribution of the total number of events to be assumed within this period.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Keep only assemblages that have a sample size of at least 10\nzuni_keep <- apply(X = zuni, MARGIN = 1, FUN = function(x) sum(x) >= 10)\n\n## Calculate date ranges for each assemblage\nzuni_span <- apply(\n  X = zuni[zuni_keep, ],\n  FUN = function(x, dates) range(unlist(dates[x > 0])),\n  MARGIN = 1,\n  dates = zuni_dates\n)\n\n## Coerce to a data.frame\nzuni_span <- as.data.frame(t(zuni_span))\nnames(zuni_span) <- c(\"from\", \"to\")\n\n## Calculate aoristic sum (weights)\naorist_weigth <- aoristic(zuni_span, step = 50, weight = TRUE)\nplot(aorist_weigth)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/aoristic-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## Rate of change\nroc_weigth <- roc(aorist_weigth, n = 30)\nplot(roc_weigth)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/roc-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}